spectaql:
  logoFile: ./spectaql-theme/b-logo.png
  faviconFile: ./spectaql-theme/b-logo.png
  targetDir: ./docs/midnight
  themeDir: ./spectaql-theme

introspection:
  schemaFile: ./midnight.graphql
  queryNameStrategy: capitalizeFirst
  fieldExpansionDepth: 3

info:
  title: Midnight Indexer API
  description: |
    The Midnight Indexer API exposes a GraphQL API that enables clients to query and subscribe to blockchain data — blocks, transactions, contracts, and wallet-related events — indexed from the Midnight blockchain.

    The deployed version is **v3**. For the complete GraphQL schema specification, see the [Midnight Indexer GraphQL Schema](https://github.com/midnightntwrk/midnight-indexer/blob/release/3.0.0/indexer-api/graphql/schema-v3.graphql).

    ## Quick Start

    ```bash
    curl -X POST https://midnight-preview.blockfrost.io/api/v0 \
      -H "project_id: YOUR_PROJECT_ID" \
      -H "Content-Type: application/json" \
      -d '{"query": "{ block { hash height timestamp } }"}'
    ```

    ## Endpoints

    All GraphQL operations (queries, mutations, and subscriptions) use the same endpoint:
    * **HTTP:** `https://midnight-{network}.blockfrost.io/api/v0` (POST requests)
    * **WebSocket:** `wss://midnight-{network}.blockfrost.io/api/v0/ws` (for subscriptions)

    Where `{network}` is either `mainnet` or `preview`.

    ## Authentication

    Include your project ID as the `project_id` HTTP header.

    When using WebSocket in the browser (which doesn't support custom headers), include your project ID as a subprotocol by prefixing it with `project_id_`:
    ```javascript
    new WebSocket("wss://midnight-preview.blockfrost.io/api/v0/ws", [
      "graphql-transport-ws",
      "project_id_YOUR_PROJECT_ID"
    ]);
    ```

    ## Request Format

    Send a POST request with a JSON body containing:
    * `query` (required): The GraphQL query, mutation, or subscription string
    * `variables` (optional): Variables for the GraphQL operation

    Example:
    ```json
    {
      "query": "query GetBlock($offset: BlockOffset) { block(offset: $offset) { hash height } }",
      "variables": { "offset": { "height": 100 } }
    }
    ```

    ## Query Limits

    The server may apply limitations to queries:
    * `max-depth`: Maximum nesting depth
    * `max-fields`: Maximum number of fields
    * `timeout`: Query execution timeout
    * `complexity`: Query complexity cost

  x-introItems:
    - title: Scalar Types
      description: |
        The API uses custom scalar types:

        | Scalar | Description | Example |
        |--------|-------------|---------|
        | `HexEncoded` | Hex-encoded bytes (hashes, addresses, session IDs) | `"0x1234abcd..."` |
        | `ViewingKey` | Wallet viewing key in Bech32m or hex format | `"mn_shield-esk1abc..."` |
        | `CardanoRewardAddress` | Bech32-encoded Cardano reward address | `"stake_test1..."` |
        | `UnshieldedAddress` | Bech32m-encoded Midnight unshielded address | `"midnight1..."` |
        | `DustAddress` | Bech32m-encoded DUST address | `"midnight1..."` |
        | `Unit` | Empty return type for mutations with no data | `null` |

servers:
  - url: https://midnight-mainnet.blockfrost.io/api/v0
    description: Midnight Mainnet
    headers:
      - name: project_id
        example: YOUR_PROJECT_ID
        comment: Your Blockfrost project ID for Midnight Mainnet
  - url: https://midnight-preview.blockfrost.io/api/v0
    description: Midnight Preview
    production: true
    headers:
      - name: project_id
        example: YOUR_PROJECT_ID
        comment: Your Blockfrost project ID for Midnight Preview
